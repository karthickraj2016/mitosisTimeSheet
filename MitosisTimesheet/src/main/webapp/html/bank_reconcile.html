
<div ng-init="list()">
<div class="container" style="margin-top: 6%;"><div class="row"><div class="col-xs-12 col-md-12"><h2 class="text-center">Bank Reconcile Details</h2></div></div></div>


<form class="" role="form" ng-submit="insertPaymentInfo()">
<div class="container" style="width: 100%;">
	<div class="form-invoice form-horizontal">
	<div class="row">
	<div class="col-md-4 col-sm-6" >
    <div class="form-group">
      <label class="control-label col-sm-5 textleft">Customer Name<span>:</span></label>
      <div class="col-sm-7">
       <select  class="form-control empdet-form" required style="color: #777777;" ng-model="customers" ng-options="item as item.customerName for item in customerList" ng-change="customerChanged()">
	  	<option value="">Select Customer</option>
	  	</select> 
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-5 textleft" >Project<span>:</span></label>
      <div class="col-sm-7">          
        <select  class="form-control empdet-form" required style="color: #777777;" ng-model="projects" ng-options="item as item.projectName for item in projectList" ng-change="projectChanged()">
	    <option value="">Select Project</option>
	    </select> 
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-5 textleft">Invoice No<span>:</span></label>
      <div class="col-sm-7">          
         <select  class="form-control empdet-form" required style="color: #777777;" ng-model="invoices" ng-options="item as item.invoiceNumber for item in invoiceList" ng-change="invoiceChanged()">
	   <option value="">Select Invoice</option>
		</select> 
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-5 textleft">Receipt Number<span>:</span></label>
      <div class="col-sm-7">          
        <select  class="form-control empdet-form" required style="color: #777777;" ng-model="receipt" ng-options="item as item.receiptNumber for item in paymentDetails" ng-change="getReceiptDetails()">
	   <option value="">Select Receipt Number</option>
		</select> 
      </div>
    </div>	
    
    </div>
    
    <div class="col-md-4 col-sm-6">
    <div ng-init="dates()" class="form-group">
      <label class="control-label col-sm-5 textleft">Invoice Date<span>:</span></label>
      <div class="col-sm-7">
       <span class="form-control" readonly>{{invoice.invoiceDateStr}}</span> 
       </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-5 textleft">Paid Status<span>:</span></label>
      <div class="col-sm-7">          
        <span class="form-control" readonly>{{invoice.invoiceStatus}}</span> 
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-5 textleft">Invoice Amount<span>:</span></label>
      <div class="col-sm-7">          
        <span class="form-control" readonly>{{invoice.invoiceAmount}}</span> 
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-5 textleft">Receipt Date<span>:</span></label>
      <div class="col-sm-7">          
        <span class="form-control" readonly>{{receiptDetails.receiptDateStr}}</span> 
      </div>
    </div>
    </div>
    
    <div class="col-md-4 col-sm-6">
    <div class="form-group">
      <label class="control-label col-sm-5 textleft">Paid So Far<span>:</span></label>
      <div class="col-sm-7">          
        <span class="form-control" readonly>{{invoice.paidAmount}}</span> 
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-5 textleft">Balance Amount<span>:</span></label>
      <div class="col-sm-7">          
        <span class="form-control" readonly>{{invoice.balanceAmount}}</span> 
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-5 textleft">Currency<span>:</span></label>
      <div class="col-sm-7">          
        <span class="form-control" readonly>{{invoice.currencyCode}}</span> 
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-5 textleft">Receipt Amount<span>:</span></label>
      <div class="col-sm-7">          
        <span class="form-control" readonly>{{receiptDetails.paidAmount}}</span> 
      </div>
    </div>
    </div>
    </div>
     <div class="col-xs-12">
    <h4 class="text-center">Bank Received Information</h4>
    
    <div class="container" style="width: 100%;">
	<div class="pay-form-div form-inline" style="word-spacing: 10px;">    
    <div ng-init="dates()" class="form-group" style="margin: 0;">
       <input type="text" required class="form-control" ui-date="dateOptions" ui-date-format="dd-mm-yy" ng-model="payment.recievedDate">
    </div>
    <div class="form-group" style="margin: 0;">
      	<input class="form-control" id="receivedAmt" type="text" onkeypress="return isNumber(event)" placeholder="Bank Received Amount" ng-model="payment.receivedamount" ng-change="calculateCommisionAmount()" required>
    </div>
    <div class="form-group" style="margin: 0;">
       <input class="form-control" type="text" onkeypress="return isNumber(event)" placeholder="Exchange Rate" ng-model="payment.exchangerate" ng-change="calculateAmount()" required>
    </div>
    <div class="form-group" style="margin: 0;">
       <input class="form-control" type="text" onkeypress="return isNumber(event)" placeholder="Bank Commission" ng-model="payment.commisionamount" readonly>
    </div>
    <div class="form-group" style="margin: 0;">
       <input class="form-control" type="text"  placeholder="Amount in INR" ng-model="payment.paidAmountInr" readonly>
    </div>
       
    <div class="form-group" style="margin: 0;">        
      <div class=" col-sm-12" style="word-spacing: 15px;">
	    <input type="submit" class="btn btn-primary btn-sm " value="Save"></input>
	    <input type="reset" class="btn btn-primary btn-sm " value="Clear"></input>
      </div>
    </div>
     
    </div>
    </div>
    </div>
    
    </div>
    
    
</div>
</form>

<div class="container" style="width: 100%;">
<div class="table-responsive">
<table class="table">
	<thead class="thead-mit-ts">
		<tr>
			<th>Project</th>
			<th>Invoice No</th>
			<th>Invoice Date</th>
			<th>Invoice Amt</th>			
			<th>Recpt No</th>
			<th>Recpt Amt</th>
			<th style="width: 140px;">Bank Recvd Date</th>
			<th style="width: 140px;">Bank Recvd Amt</th>
			<th>Exg Rate</th>
			<th style="width: 140px;">Bank commision</th>
			<th>Amt(INR)</th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr ng-repeat="sheet in filteredParticipantsResults">
			<td>
				<span ng-show="!showEdit">{{sheet.invoiceHdr.project.projectName}}</span>
				<span ng-show="showEdit"><input class="form-control" type="text" ng-model="sheet.invoiceHdr.project.projectName" readonly></span>
			</td>
			<td>
				<span ng-show="!showEdit">{{sheet.invoiceHdr.invoiceNumber}}</span>
				<span id="{{sheet.id}}" ng-show="showEdit"><input class="form-control" type="text" ng-model="sheet.invoiceHdr.invoiceNumber" readonly></span>
			</td>
			<td>
				<span ng-show="!showEdit">{{sheet.invoiceHdr.invoiceDateStr}}</span>
				<span ng-show="showEdit"><input class="form-control" type="text" ng-model="sheet.invoiceHdr.invoiceDateStr" readonly></span>
			</td>
			<td>
				<span ng-show="!showEdit">{{sheet.invoiceHdr.invoiceAmount}}</span>
				<span ng-show="showEdit"><input class="form-control" type="text" ng-model="sheet.invoiceHdr.invoiceAmount" readonly></span>
			</td>
			<td>
				<span ng-show="!showEdit">{{sheet.receiptNumber}}</span>
				<span ng-show="showEdit"><input class="form-control" type="text" ng-model="sheet.receiptNumber" readonly></span>
			</td>
			<td>
				<span ng-show="!showEdit">{{sheet.paidAmount}}</span>
				<span ng-show="showEdit"><input class="form-control" type="text" ng-model="sheet.paidAmount" readonly></span>
			</td>
			<td>
				<span ng-show="!showEdit">{{sheet.bankReceivedDateStr}}</span>
				<span ng-show="showEdit"><input class="form-control" type="text" ui-date="dateOptions" ui-date-format="dd-mm-yy" ng-model="sheet.bankReceivedDateStr" ></span>
			</td>
			<td>
				<span ng-show="!showEdit">{{sheet.receivedAmount}}</span>
				<span ng-show="showEdit"><input class="form-control" type="text" ng-model="sheet.receivedAmount" ng-change="calculateCommision(sheet)"></span>
			</td>
			<td>
				<span ng-show="!showEdit">{{sheet.exchangeRate}}</span>
				<span ng-show="showEdit"><input class="form-control" type="text" ng-change="calculateRate(sheet)" ng-model="sheet.exchangeRate"></span>
			</td>
			<td>
				<span ng-show="!showEdit">{{sheet.commisionAmount}}</span>
				<span ng-show="showEdit"><input class="form-control" type="text"  ng-model="sheet.commisionAmount" readonly></span>
			</td>
			<td>
				<span ng-show="!showEdit">{{sheet.paidAmountInr}}</span>
				<span ng-show="showEdit"><input class="form-control" type="text" ng-model="sheet.paidAmountInr" readonly></span>
			</td>
			
			<td style="word-spacing: 15px;">
		         <a><span class="glyphicon glyphicon-pencil" ng-click="showEdit = !showEdit" ng-show="!showEdit"></span></a>
				<!-- <a><span class="glyphicon glyphicon-remove" ng-click="confirmDelete(sheet.id)" ng-show="!showEdit"></span></a> -->
				<a><span class="glyphicon glyphicon-ok" ng-click="showEdit = !showEdit;updatePaymentInfo(sheet)" ng-show="showEdit" ng-disabled="checkRequired(sheet);"></span></a> 
				<a><span class="glyphicon glyphicon-ban-circle" ng-click="showEdit = !showEdit;" ng-show="showEdit"></span></a> 			
			</td>
		</tr>
	</tbody>
</table>

<pagination total-items="totalItems" ng-model="currentPage" max-size="maxSize" items-per-page="numPerPage" class="pagination-sm" boundary-links="true"></pagination>
</div>
</div>
 <div class="alert-msg col-xs-12 col-sm-6"><p class="alert-success"></p></div>
 <div class="alert-msg1 col-xs-12 col-sm-6"><p class="alert-danger"></p></div>
